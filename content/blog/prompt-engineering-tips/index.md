---
title: プロンプトエンジニアリングのコツ
date: "2023-05-06"
category: "プログラミング"
tags: ["LLMs","ChatGPT"]
slug: /articles/prompt-engineering-tips/
---


# プロンプトエンジニアリングとは
プロンプトエンジニアリングとは、ChatGPTのような言語モデルから最適な回答を引き出すためのプロンプトを設計する学問分野である。この記事では基本的なプロンプトエンジニアリングの使い方のコツを扱う。より詳細な内容については「Prompt Engineering Guide」を参照されたい。なお、この記事の内容については、ChatGPT(GPT-3.5)で動作確認を実施した。

# ChatGPTについて
ChatGPTは、OpenAIによって開発された大規模言語モデルです。文章生成、テキスト分類、質問応答、文章の要約、情報抽出、言語翻訳など、さまざまなタスクに利用できる。

## 料金
ChatGPTでは、Webサイトから利用できるサービスとAPIから利用するサービスが完全に分かれていて、それぞれ以下のような料金体系になっている。

||Web|API|
|---|---|---|
|GPT-3.5|無料|従量課金（$0.002/1kトークン）|
|GPT-4|定額（$20/月）|従量課金（$0.03/1kトークン）|

ChatGPTの登録時に、APIが無料で使える18ドル分のチケットが付与されるので、「APIは無料で使える」と勘違いされがちだが、18ドル分使用後、あるいは一定期間経過後に利用できなくなる。

APIを利用する場合は、従量課金なので課金額の上限を設定しておくとよい。

## トークン
英語の場合、文字数に関わらずほぼ１単語１トークンだが、日本語の場合、ほぼ１文字１トークン、特に漢字は１文字２～３トークンかかる。会話履歴を含めてデータが送信されるため、会話を何往復も続けるような使い方には注意が必要である。


# パラメータの設定
パラメータを設定を変更すると、異なる回答が得られるようになる。

|パラメータ|説明|
|---|---|
|Temperature|モデルが応答を生成する際の決定性を表すパラメータ。この値が低いほどより決定論的になり、高くなるほどランダム性が増す。QAなどの正確性が求められるタスクではこの値を低く、詩の生成などの創造性が求められるタスクでは高く設定すると効果的である。|
|Top_p|Temperatureと同様にモデルが応答を生成する際の決定性を表すパラメータ。|

一般的には、上記のどちらか一方を変更すれば良い。なお、これらのパラメータは、ChatGPTのAPIでは変更できるが、ChatGPTのサイトでは変更できない。


# 簡単に始める
プロンプトの設計は最適な回答を得るために多くの試行錯誤が必要な反復的なプロセスである。シンプルなプロンプトから始めて、徐々に要素や文脈を追加していくのが良い。

# 良いプロンプト
## 指示を明確にする
「書く」、「分類する」、「要約する」、「翻訳する」、「並べ替える」、「コードを生成する」など、達成したいことを明確に指示することで、効果的なプロンプトを設計できる。一般的に指示はプロンプトの最初に記述する。

```text:title=プロンプト
以下の文章をドイツ語に翻訳してください。

入力：私はドイツ語を勉強しています。
翻訳：
```

```text:title=出力
Ich lerne Deutsch.
```